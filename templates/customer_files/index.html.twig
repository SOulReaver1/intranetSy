{# {% extends 'base.html.twig' %}

{% block title %}CustomerFiles index{% endblock %}
{% set title = "Les fiches clients" %}
{% set datatable = true %}
{% block header %}
    <div class="row justify-content-end">
        <div class="ui right pointing dropdown icon button" id="test" style="max-height: 100px">
            <span><i class="settings icon"></i>Filtrer par statut</span>
            <div class="menu">
                <div class="ui left search icon input">
                    <i class="search icon"></i>
                    <input type="text" name="search" placeholder="Rechercher un statut">
                </div>
                <div class="header">
                    <i class="tags icon"></i>
                    Les statuts
                </div>
                <a href="/" class="item">
                    <div class="ui red empty circular label"></div>
                    Tout regarder
                </a>
                {% for statut in statuts %}
                    <a href="?statut={{statut.id}}" class="item">
                        <div class="ui red empty circular label"></div>
                        {{statut.name}}
                    </a>
                {% endfor %}
            </div>
        </div>
        {% if is_granted('ROLE_ALLOW_CREATE') %}
                <a class="btn btn-primary" href="{{url('customer_files_new')}}">Ajouter une fiche client</a>
        {% endif %}
    </div>
{% endblock %}
{% block body %}
    <div id="customers">Chargement...</div>
{% endblock %}
{% block stylesheets %}
    <link href="{{asset('assets/js/plugins/semantic/semantic.css')}}" rel="stylesheet">
{% endblock %}
{% block javascripts %}
    <script type="text/javascript" src="{{asset('assets/js/plugins/datatables.min.js')}}"></script>
    <script src="{{ asset('bundles/datatables/js/datatables.js') }}"></script>
    <script src="{{asset('assets/js/plugins/semantic/semantic.js')}}"></script>
    <script>$('#test').dropdown()</script>
    <script>
        $(function() {
            $('#customers').initDataTables({{ datatable_settings(datatable) }}, {
                responsive: true,
                searching: true,
                processing: true,
                dom: 'lBfrtip',
                buttons: [
                {
                    extend: 'copy',
                    text: 'Copier le tableau',
                    key: {
                        key: 'c',
                        ctrlKey: true
                    }
                },
                {
                    extend: 'pdf',
                    exportOptions:{
                        columns:':visible',
                    },
                },
                {
                    extend: 'excel',
                    exportOptions:{
                        columns:':visible',
                    },
                },
                {
                    extend: 'colvis',
                    text: 'Filter le tableau',
                },
                {
                    extend: 'print',
                    text: 'Imprimer le tableau',
                }]
            });
        });
    </script>
{% endblock %} #}
<h1>Maintenance de l'intranet</h1>